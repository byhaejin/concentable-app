<!-- component template -->
<template>
    <div class="page">
        <sub-header title="회원가입"  nomenu="true"></sub-header>
        <div class="page-content">
            <br>
            <div class="login-screen-title"></div>

            <div class="list block">
                <form id="agree-form">
                <ul>
                    <li style="border-bottom: 1px solid #dadada;">
                        <div class="item-inner">
                            <div class="item-title">
                                <label class="item-checkbox item-content">
                                    <input type="checkbox" name="checkbox-agrees" />
                                    <i class="icon icon-checkbox"></i>
                                    이용약관, 개인정보처리 모두 동의하기
                                </label>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-inner">
                            <div class="item-title">
                                <label class="item-checkbox item-content">
                                    <input type="checkbox" name="checkbox-agree" value="concentable"/>
                                    <i class="icon icon-checkbox"></i>
                                    컨센터블 스페이스 이용약관 동의<span style="color:#397e43; padding-left: 6px;">[필수]</span> 
                                </label>
                            </div>                            
                            <!-- <div class="item-after">
                                <a href="#" data-popup=".concentable-popup" class="popup-open">[보기]</a>
                            </div> -->
                        </div>                        
                        <div class="terms_box">
                            이 약관은 (주)공독 및 (주)동독 신하의 컨센터블, 컨센터블24시독서실,컨센티블스페이스(이하 ‘회사’라 합니다.)와 
                            회사가 직/간접으로 제공하는 모든 온/오프라인 서비스를 이용하는 자(이하 ‘이용자’ 또는 ‘회원’이라 힙니다.) 사이에
                            이 약관은 (주)공독 및 (주)동독 신하의 컨센터블, 컨센터블24시독서실,컨센티블스페이스(이하 ‘회사’라 합니다.)와 
                            회사가 직/간접으로 제공하는 모든 온/오프라인 서비스를 이용하는 자(이하 ‘이용자’ 또는 ‘회원’이라 힙니다.) 사이에
                            이 약관은 (주)공독 및 (주)동독 신하의 컨센터블, 컨센터블24시독서실,컨센티블스페이스(이하 ‘회사’라 합니다.)와 
                            회사가 직/간접으로 제공하는 모든 온/오프라인 서비스를 이용하는 자(이하 ‘이용자’ 또는 ‘회원’이라 힙니다.) 사이에
                            이 약관은 (주)공독 및 (주)동독 신하의 컨센터블, 컨센터블24시독서실,컨센티블스페이스(이하 ‘회사’라 합니다.)와 
                            회사가 직/간접으로 제공하는 모든 온/오프라인 서비스를 이용하는 자(이하 ‘이용자’ 또는 ‘회원’이라 힙니다.) 사이에
                            이 약관은 (주)공독 및 (주)동독 신하의 컨센터블, 컨센터블24시독서실,컨센티블스페이스(이하 ‘회사’라 합니다.)와 
                            회사가 직/간접으로 제공하는 모든 온/오프라인 서비스를 이용하는 자(이하 ‘이용자’ 또는 ‘회원’이라 힙니다.) 사이에
                        </div>                       
                    </li>
                    <li>
                        <div class="item-inner">
                            <div class="item-title">
                                <label class="item-checkbox item-content">
                                    <input type="checkbox" name="checkbox-agree" value="position"/>
                                    <i class="icon icon-checkbox"></i>
                                    [필수]위치기반 서비스 이용약관 동의
                                </label>
                            </div>
                            <div class="item-after">
                                <a href="#" data-popup=".position-popup" class="popup-open">[보기]</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="item-inner">
                            <div class="item-title">
                                <label class="item-checkbox item-content">
                                    <input type="checkbox" name="checkbox-agree" value="personal"/>
                                    <i class="icon icon-checkbox"></i>
                                    [필수]개인정보처리방침 동의
                                </label>
                            </div>
                            <div class="item-after">
                                <a href="#" data-popup=".personal-popup" class="popup-open">[보기]</a>
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="block">
                    <button type="button"
                            class="col button button-fill button-outline button-round color-green"
                            @click="agreeNext">다음</button>
                </div>
                </form>
            </div>

        </div>

        <div class="popup concentable-popup">
            <div class="view">
                <div class="page">
                    <div class="navbar">
                        <div class="navbar-bg"></div>
                        <div class="navbar-inner">
                            <div class="title">
                                컨센터블 스패이스 이용약관
                            </div>
                            <div class="right">
                                <!-- Link to close popup -->
                                <a class="link popup-close">
                                    <i class="f7-icons">clear_fill</i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="page-content">
                        <br>
                        <div class="block">
                            ...
                        </div>
                        <br>
                    </div>
                </div>
            </div>
        </div>

        <div class="popup position-popup">
            <div class="view">
                <div class="page">
                    <div class="navbar">
                        <div class="navbar-bg"></div>
                        <div class="navbar-inner">
                            <div class="title">
                                위치기반 서비스 이용약관
                            </div>
                            <div class="right">
                                <!-- Link to close popup -->
                                <a class="link popup-close">
                                    <i class="f7-icons">clear_fill</i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="page-content">
                        <br>
                        <div class="block">
                            ...
                        </div>
                        <br>
                    </div>
                </div>
            </div>
        </div>

        <div class="popup personal-popup">
            <div class="view">
                <div class="page">
                    <div class="navbar">
                        <div class="navbar-bg"></div>
                        <div class="navbar-inner">
                            <div class="title">
                                개인정보처리방침
                            </div>
                            <div class="right">
                                <!-- Link to close popup -->
                                <a class="link popup-close">
                                    <i class="f7-icons">clear_fill</i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="page-content">
                        <br>
                        <div class="block">
                            ...
                        </div>
                        <br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<style scoped>
  .page-content {background-color: #f5f6f7;}
  .list ul {border: 1px solid #dadada;}
  .list .item-content {min-height: 24px;}
  .list .item-title {font-size:14px;}  
  .icon-checkbox {border-radius:60%;}
  .icon-checkbox::after {font-size: 12px;}
  label.item-checkbox input[type="checkbox"]:checked ~ .icon-checkbox, label.item-checkbox input[type="checkbox"]:indeterminate ~ .icon-checkbox {
     border-color: #397e43; 
     background-color: #397e43;
  }
  .terms_box{      
      position: relative;
      overflow: auto;
      width: 90%;
      height: 90px;
      margin: 0px auto;
      padding:6px 12px;
      background-color: #f7f7f7;
      border: 1px solid #dadada;
      box-sizing: border-box;
      font-size: 12px;
      line-height: 16px;
      color: #8f8f8f;      
      scrollbar-base-color: #d9d9d9;
      scrollbar-arrow-color: #8e8e8e;
      scrollbar-3dlight-color: #d9d9d9;
      scrollbar-darkshadow-color: #d9d9d9;
      scrollbar-face-color: #d9d9d9;
      scrollbar-highlight-color: #d9d9d9;
      scrollbar-shadow-color: #d9d9d9;
      scrollbar-track-color: #f2f2f2;
      -webkit-overflow-scrolling: touch;
  }
</style>
<!-- component styles -->

<script>
    return {
        methods: {
            agreeNext: function () {
                const formData = app.form.convertToData('#agree-form');
                if(formData['checkbox-agree'].length < $$('[name="checkbox-agree"]').length) {
                    this.$app.dialog.alert('약관모두 동의해 주세요!','');
                } else {
                    mainView.router.navigate('/auth/agreetype/');
                }
            },
        },
        on: {
            pageInit: function () {
                // do something on page init
                const jsDom = [];
                jsDom["agrees"] = $$('[name="checkbox-agrees"]');
                jsDom["agree"] = $$('[name="checkbox-agree"]');

                jsDom["agree"].on('change', function (e) {
                    var totalChecked = $$('[name="checkbox-agree"]:checked').length;

                    if (totalChecked < jsDom["agree"].length) {
                        jsDom["agrees"].prop('indeterminate', true);
                    } else {
                        jsDom["agrees"].prop('indeterminate', false);
                    }

                    if (totalChecked === 0) {
                        jsDom["agrees"].prop('indeterminate', false);
                        jsDom["agrees"].prop('checked', false);
                    } else if (totalChecked === jsDom["agree"].length) {
                        jsDom["agrees"].prop('checked', true);
                    }
                });

                jsDom["agrees"].on('change', function (e) {
                    if (e.target.checked) {
                        jsDom["agree"].prop('checked', true);
                    } else {
                        jsDom["agree"].prop('checked', false);
                    }
                });
            },
        }
    }
</script>